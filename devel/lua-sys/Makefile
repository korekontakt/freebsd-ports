# $FreeBSD$

PORTNAME=	sys
PORTVERSION=	0.20150907
CATEGORIES=	devel
PKGNAMEPREFIX=	${LUA_PKGNAMEPREFIX}

MAINTAINER=	jbeich@FreeBSD.org
COMMENT=	System library for Torch

LICENSE=	BSD2CLAUSE
LICENSE_FILE=	${WRKSRC}/LICENSE

RUN_DEPENDS=	${LUA_PKGNAMEPREFIX}paths>0:${PORTSDIR}/devel/lua-paths

USE_GITHUB=	yes
GH_ACCOUNT=	torch
GH_TAGNAME=	d61191f

USES=		cmake lua uniquefiles:dirs
CMAKE_ARGS=	-DLUA_INCDIR="${LUA_INCDIR}" \
		-DLUA_LIBDIR="${LUA_LIBDIR}" \
		-DLUADIR="${LUA_MODSHAREDIR}" \
		-DLIBDIR="${LUA_MODLIBDIR}"
PLIST_FILES=	%%LUA_MODSHAREDIR%%/${PORTNAME}/init.lua \
		%%LUA_MODLIBDIR%%/lib${PORTNAME}.so
PORTDOCS=	README.md

OPTIONS_DEFINE=	DOCS

post-install:
	(cd ${WRKSRC} && ${COPYTREE_SHARE} \
		"${PORTDOCS}" ${STAGEDIR}${DOCSDIR})

.include <bsd.port.mk>
